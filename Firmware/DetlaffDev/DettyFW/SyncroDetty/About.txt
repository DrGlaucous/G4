This version doesn't use freeRTOS tasks. Everything (including display) is run inline